<!DOCTYPE html>
<html lang="pt-BR" layout:decorate="~{layout/layoutpadrao}" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Detalhes da Área</title>
</head>
<body>
    <div layout:fragment="conteudo">
        <div class="flex flex-col gap-6">
            
            <div class="flex justify-between items-start">
                <div>
                    <a th:href="@{/florestas}" class="text-sm text-gray-500 hover:text-gray-800 flex items-center gap-1 mb-2">
                        ← Voltar para lista
                    </a>
                    <h1 class="text-3xl font-bold text-gray-800" th:text="${floresta.name}">Nome da Floresta</h1>
                    <p class="text-gray-500 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16"><path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/></svg>
                        <span th:text="${floresta.endereco}">Endereço</span>
                    </p>
                </div>
                
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex gap-6">
                    <div class="text-center">
                        <span class="block text-2xl font-bold text-blue-600" th:text="${#lists.size(floresta.pessoa)}">0</span>
                        <span class="text-xs text-gray-500 uppercase">Brigadistas</span>
                    </div>
                    <div class="text-center border-l pl-6">
                        <span class="block text-2xl font-bold text-red-600" th:text="${#lists.size(floresta.alert)}">0</span>
                        <span class="text-xs text-gray-500 uppercase">Ocorrências</span>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                        <h3 class="font-bold text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="text-blue-500" viewBox="0 0 16 16"><path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/></svg>
                            Equipe Local
                        </h3>
                    </div>
                    <ul class="divide-y divide-gray-200">
                        <li th:each="p : ${floresta.pessoa}" class="px-6 py-4 flex items-center justify-between hover:bg-gray-50">
                            <div>
                                <p class="text-sm font-medium text-gray-900" th:text="${p.nome}">Nome</p>
                                <p class="text-xs text-gray-500" th:text="${p.tipo}">Função</p>
                            </div>
                            <span class="text-sm text-gray-400" th:text="${p.telefone}">Tel</span>
                        </li>
                        <li th:if="${#lists.isEmpty(floresta.pessoa)}" class="px-6 py-8 text-center text-sm text-gray-400">
                            Nenhum membro alocado nesta base.
                        </li>
                    </ul>
                </div>

                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                        <h3 class="font-bold text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="text-red-500" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/></svg>
                            Histórico de Ocorrências
                        </h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Gravidade</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr th:each="a : ${floresta.alert}" class="hover:bg-gray-50">
                                    <td class="px-4 py-2 text-xs text-gray-500" th:text="'#' + ${a.id}">#1</td>
                                    <td class="px-4 py-2 text-xs font-bold" 
                                        th:classappend="${a.tipo.name() == 'ALTA' or a.tipo.name() == 'CRITICA'} ? 'text-red-600' : 'text-yellow-600'"
                                        th:text="${a.tipo}">ALTA</td>
                                    <td class="px-4 py-2">
                                        <span class="px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs" th:text="${a.status}">ABERTO</span>
                                        <a th:href="@{/alertas/visualizar/{id}(id=${a.id})}" class="text-blue-600 hover:text-blue-900 font-bold hover:underline">Detalhes</a>
                                    </td>
                                </tr>
                                <tr th:if="${#lists.isEmpty(floresta.alert)}">
                                    <td colspan="3" class="px-6 py-8 text-center text-sm text-gray-400">
                                        Nenhuma ocorrência registrada.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>
</html>